INSTALL - Anleitung zur Installation von UNIX-Connect
=====================================================

      Dies ist nur eine Kurzversion. Die offizielle Dokumentation
      zur Installation von UNIX-Connect ist im TeXinfo-Format in der Datei
      docs/uconn.texi zu finden.

      Derzeit (v0.79) ist allerdings diese Datei bereits aktualisiert,
      docs/uconn.texi aber noch auf Stand von v0.53...

      Diese Datei ist neu geschrieben zur Anpassung an das neue
      configure-Script von Andreas Barth <aba@muenchen.pro-bahn.de>.
      Der Fileserver und die Erweiterung für die APC Unix software
      stehen damit vorübergehend nicht zur Verfügung.

      Datum: 8. August 1999

      Unix-Connect ist freie Software und unterliegt der GPL. Näheres
      in der Datei COPYING.


Folgendes ist zu tun:

1. Nutzer- / Gruppenkennung
---------------------------

UNIX-Connect benoetigt eine User-ID, unter der die Gateway-Programme
arbeiten und Daten an das Mail- und News-System weitergeben. Auch die
Logfiles gehoeren diesem User und sollten nur von ihm lesbar sein.

Eine passende Nutzer- und Gruppenkennung aussuchen und ggf. anlegen



2. ./configure <parameter>.
---------------------------

Im Gegensatz zu früher wird hier wirklich _nur_ konfiguriert,
Dateien oder Verzeichnisse werden nur _im_ Quellcode-Baum
angelegt.

Die Parameter können sein:


--with-path=path         Path innerhalb von UC (Default=PATH).

Welchen Wert die Variable PATH innerhalb von ZC-Programmen hat.
Im Path müssen beispielsweise sz/rz gefunden werden können.

--with-dir=dir           In welches Unterverzeichnis die Dateien kommen.
--with-execdir=dir       In welches Verzeichnis die Programme kommen.
--with-confdir=dir       In welches Verzeichnis die Konfiguration kommt.


Defaultmäßig kommen alle Programme nach <libexedir>/<dir>,
alle Konfigurationsdateien nach <sysconfdir>/<dir>. Der
Default für <dir> ist zconnect.

Die Änderungen von --with-execdir und --with-confdir überschreiben
die von --with-dir.

(siehe auch --prefix, --exec-prefix, --libexecdir, --sysconfdir)


--with-spooldir=dir      Spooldir.

Wo die Spoolfiles hinkommen.

Default: /var/spool/zconnect, falls /var/spool existiert,
sonst /usr/spool/zconnect


--with-user=user         Nutzerkennung für Unix-Connect
--with-group=group       Gruppenkennung für Unix-Connect

Diese beiden Parameter _müssen_ angegeben werden.


--with-box=typ           point, gate, box

UNIX-Connect kann sehr vielseitig einsetzen werden. Die häufigsten
Konfigurationen sind:

   1) Point:    Als persönliches System. Unix-Connect wird als Point
                an einer Z-NETZ MailBox eingesetzt. Achtung, in diesem
                Fall dürfen keine Daten auf der RFC-Seite weitergegeben
                werden.
   2) Gateway:  Der Rechner hat nichts mit dem Z-NETZ zu tun,
                aber andere Systeme moechten von Ihnen Mail/News
                per ZCONNECT (bzw. JANUS) beziehen.
   3) Box:      Als MailBox im Z-Netz. UNIX-Connect macht Verbindungen zu
                anderen MailBoxen sowie zu Points.

Wenn Sie unsicher sind, waehlen Sie die (3). Damit wird eine Vollversion
installiert.
Für (1) bitte point, für (2) gate und für (3) server verwenden.



--disable-real-gate       Nachrichten zurückkonvertieren erlauben.

Falls Sie Verbindungen ins Usenet haben, die nicht über ZConnect-Strecken
laufen, dürfen Sie Nachrichten, die aus dem Usenet stammen, nicht mehr nach
RFC zurückwandeln, da diese (prinzipbedingt) verändert worden sind.

UNIX/Connect unterbindet die Rückkonvertierung von Usenet-Artikeln, indem
beim Konvertieren nach ZConnect ein entsprechender Header gesetzt wird,
damit sie nicht wieder in das Usenet gesendet werden. Mit dieser Option
kann das Rückkonvertieren wieder ermöglicht werden.



--with-mail=typ          Welches Mailsystem wird verwendet?
--with-news=typ          Welches Newssystem wird verwendet?

Es gibt folgende Mailsysteme:
sendmail, smail und qmail

Es gibt folgende Newssysteme:
cnews, inn

Wird nichts angegeben, dann wird "no" gewählt. Damit wird nur
ein Minimal-System installiert. Bitte die READMEs in
mail-and-news/<...> beachten.



--with-apc               APC einkompilieren (meist unnötig).

Hiermit wird eine sehr selten benoetigte Erweiterung fuer
spezielle Binaermails hereincompiliert (fuer APC Unix software).


--enable-bang            Keine Bang-Pfade verwenden.

UNIX-Connect erzeugt Nachrichten im BSMTP-Format. Für die
Weiterverarbeitung mit UUCP-Programmen sollten die Envelope-Adressen
in Bang-Notation erzeugt werden, für die Weiterverarbeitung mit qmail
nicht. Den meisten Programmen ist es egal.


--with-dialprae=code      Wählcode (Default=atdt).

Was einem Wählbefehl vorausgestellt werden soll. Im Zweifelsfall auch den
Rauswahlcode für die Nebenstellenanlage angeben (zB atdp0,).


--with-ortswahl=code      Ortsvorwahl (Default=0).
--with-intwahl=code       Internationale Vorwahl (Default=00).

Eigentlich selbsterklärend.


--with-sys=sys           Systemname.
--with-domain=domain     Domainname.

dito.



Die Dateien include/policy.h, include/config.h, include/sysdep.h,
Makefile und Makefile.global können vor dem Übersetzen angeschaut
und evtl. korregiert werden. Vor dem Installieren sollen die
Dateien in etc/, insbesondere etc/myself.zconnect und myself.config,
angepasst werden. Die Dateien in etc werden nur installiert, wenn
sie noch nicht vorhanden sind.


3. Übersetzen
-------------

make


4. Installieren
---------------

make install

make install
muß von Root ausgeführt werden.



5. Points/Systeme anlegen
-------------------------

Für jedes bekannte System (auch Points) muß eine Datei in
zcondir/systems vorhanden sein. Das nähere dazu steht
in README.systeme.



6. Login-Accounts einrichten
----------------------------

Wenn Sie ZCONNECT oder JANUS Anrufe entgegennehmen koennen moechten,
brauchen Sie einen Login fuer das jeweilige Verfahren:

   Login         Verfahren        Bemerkung
 -----------------------------------------------------------------------
   janus         JANUS            der Login-Prompt muss "Username:" sein.
   zconnect      ZCONNECT-3.1     Login-Prompt muss "ogin" oder "ame"
                                  enthalten (Gross/Kleinschreibung wird
                                  ignoriert)
 -----------------------------------------------------------------------

Es müssen login-Möglichkeiten für janus und zconnect geschaffen werden.
Nach dem Einloggen muß Zugriff auf die Dateien geschaffen werden, sprich
die Programme müssen unter der User-ID der bei configure angegebenen
Kennung laufen.

Als Alternative zum Eintrag in die Passwort-Datei kann auch mittels
mgetty der Login realisiert werden.



7. In das Mail- und Newssystem einbinden
----------------------------------------

Bitte in den passenden READMEs in den Unterverzeichnissen von
mail-and-news nachschauen, wie das beim jeweiligen System geht.



8. Mail und News regelmäßig packen
----------------------------------

Wenn andere Systeme anrufen, so müssen regelmäßig die Daten gepackt
werden. Dies kann beispielsweise durch Aufruf von <bindir>/prearc
aus der Root-Crontab erfolgen.

Außerdem sollten hin und wieder die back*-Verzeichnisse aufgeräumt
werden.


9. Fertig
---------

Viel Spaß.



Andi Barth <aba@muenchen.pro-bahn.de>
